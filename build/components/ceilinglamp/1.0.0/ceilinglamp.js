define("undefined/mtd/pc/components/ceilinglamp/1.0.0/ceilinglamp.js",[],function(){"use strict";var t=_.Class.extend({construct:function(t){$.extend(this,{container:null,zIndex:100,top:0,arrive:null,arriveThreshold:0,addWrap:!1,hasFixedStyle:!1,fixedClassName:"J_ceilinglamp_fixed",threshold:"auto",width:"auto",align:null,scrollDelay:50,onShow:null,onHide:null},t),this.$container=$(this.container),this.arrive=$(this.arrive),this.init()},init:function(){var t=this;t.offsetTop=this.$container.offset().top,t.insert(),t.showInit(),t.bind()},insert:function(){var t=this;if(!t.addWrap){var e="J_ceilinglamp_wrap",n="";"auto"==t.width&&(t.width=t.$container.outerWidth()),null!==t.width&&t.width>=0&&(n="width:"+t.width+"px;"),t.$container.wrap('<div class="'+e+'" style="'+n+"height:"+t.$container.outerHeight(!0)+'px;"></div>'),t.eleWrap=$("."+e)}if("auto"==t.threshold?t.threshold=t.$container.outerHeight(!0):isNaN(parseInt(t.threshold))&&(t.threshold=0),t.currentClass=t.fixedClassName,!t.hasFixedStyle){var i=t.zIndex,o=t.top-parseInt(t.$container.css("marginTop"),10),s="."+t.currentClass+"{position:fixed;top:"+o+"px;z-index:"+i+"}";t.insertStyles(s)}},insertStyles:function(t){var e=document,n=e.getElementsByTagName("head"),i=e.createElement("style");if(i.setAttribute("type","text/css"),i.styleSheet)i.styleSheet.cssText=t;else{var o=e.createTextNode(t);i.appendChild(o)}n.length&&n[0].appendChild(i)},show:function(){var t=this,e=t.$container.hasClass(t.currentClass);if(e||(t.$container.addClass(t.currentClass),$.isFunction(t.onShow)&&t.onShow.call(t,t.$container),t.isShow=!0),t.arrive){var n=$(document).scrollTop(),i=t.arrive.offset().top;if(n>=i+t.arriveThreshold){var o=i-t.offsetTop+t.arriveThreshold;t.$container.css({position:"absolute",top:o})}else t.$container[0].style.position="",t.$container[0].style.top=""}setTimeout(function(){t.isPlay=!1},10)},hide:function(){var t=this,e=t.$container.hasClass(t.currentClass);e&&(t.isShow=!1,t.$container.removeClass(t.currentClass),$.isFunction(t.onHide)&&t.onHide.call(t,t.$container))},showInit:function(){var t=this,e=$(document).scrollTop();t.$container.hasClass(t.currentClass)||(t.offsetTop=t.$container.offset().top+t.threshold),e>t.offsetTop?t.show():t.hide()},onScroll:function(){var t=this;if(null!=t.align){var e=$(document).scrollTop(),n=t.oldScrollTop,i=n>e?"top":"bottom";t.align==i?t.showInit():t.hide()}else t.showInit()},bind:function(){var t=this,e=-1;t.oldScrollTop=$(document).scrollTop(),$(window).scroll(function(){t.isShow?(t.isPlay=!0,t.onScroll()):(clearTimeout(e),e=setTimeout(function(){t.isPlay=!0,t.onScroll()},t.scrollDelay))}),$(window).resize(function(){t.isPlay||t.onScroll()})}});return t});