define("//misc.360buyimg.com/mtd/pc/components/1.0.0/sidePopMenu/sidePopMenu.js",[],function(){"use strict";var t=_.Class.extend({construct:function(t){this.config={$container:null,navItemHook:"",popItemHook:"",navCtnHook:".JS_navCtn",popCtnHook:".JS_popCtn",navItemOn:"",moveDeg:70,isAuto:!1,menuDirection:"right",itemEnterCallBack:null},t&&$.extend(this.config,t),this.checkRun()},checkRun:function(){var t=this.config;null!=t.$container&&0!=$(t.navCtnHook).length&&0!=$(t.popCtnHook).length&&""!=t.navItemHook&&""!=t.popItemHook&&this.init()},init:function(){var t=this.config;this.$navCtn=t.$container.find(t.navCtnHook),this.$popCtn=t.$container.find(t.popCtnHook),this.$navItemList=this.$navCtn.find(t.navItemHook),this.$popItemList=this.$popCtn.find(t.popItemHook),this.potCollect=[],this.moveTimer=null,this.enterTimer=null,this.isBind=!1,this.$window=$(window),this.callback=null,this.initEvents()},getNavItemInfo:function(){var t=this.config,e=[];return t.$container.find(t.navItemHook).each(function(){e.push({thisHeight:$(this).outerHeight(!0).toFixed(0),thisWidth:$(this).outerWidth().toFixed(0),thisPstX:$(this).position().left,thisPstY:$(this).position().top,thisPageY:$(this).offset().top})}),e},initEvents:function(){var t=this,e=t.config;e.$container.bind("mouseleave",$.proxy(t.ctnLeave,t)),t.$navCtn.delegate(e.navItemHook,{"mouseenter.itemEnter":t.navItemEnter,"mousemove.itemMove":t.navItemMove,"mouseleave.itemLeave":t.navItemLeave},{thisObj:t,callback:e.itemEnterCallBack}),t.isBind=!0},ctnLeave:function(){var t=this,e=t.config;t.$navItemList.removeClass(e.navItemOn),t.$popCtn.hide(),t.$popItemList.hide(),t.moveTimer=null,t.enterTimer=null},reBindNavItemEnter:function(){var t=this,e=t.config;t.$navCtn.delegate(e.navItemHook,"mouseenter.itemEnter",{thisObj:t,callback:e.itemEnterCallBack},t.navItemEnter),t.isBind=!0},unbindNavItemEnter:function(){var t=this;t.config;t.$navCtn.undelegate(".itemEnter"),t.isBind=!1},navItemEnter:function(t){var e=t.data.thisObj,i=$(this),n=e.config,o=t.data.callback,s=$(this).index(n.$container.selector+" "+n.navItemHook);i.addClass(n.navItemOn).siblings(n.$container.selector+" "+n.navItemHook).removeClass(n.navItemOn),e.$popCtn.show(),e.$popItemList.eq(s).show().siblings(n.$container.selector+" "+n.popItemHook).hide(),n.isAuto&&e.popAutoShow(s,i),"function"==typeof o&&o()},popAutoShow:function(t,e){var i=this,e=e,n=i.config,t=e.index(n.$container.selector+" "+n.navItemHook),o=[],s=0;switch(o=i.getNavItemInfo(),n.menuDirection){case"right":i.$popCtn.css({position:"absolute",left:o[t].thisWidth+"px",top:o[t].thisPstY-o[t].thisHeight+"px",right:"auto",bottom:"auto"}),s=i.$window.height().toFixed(0)-(o[t].thisPageY-i.$window.scrollTop()),o[t].thisPstY<o[t].thisHeight?i.$popCtn.css("top","0px"):s<i.$popCtn.height().toFixed(0)&&i.$popCtn.css({top:o[t].thisPstY-(i.$popCtn.height().toFixed(0)-s)+"px"});break;case"left":i.$popCtn.css({position:"absolute",left:"auto",top:o[t].thisPstY-o[t].thisHeight+"px",right:o[t].thisWidth+"px",bottom:"auto"}),s=i.$window.height().toFixed(0)-(o[t].thisPageY-i.$window.scrollTop()),o[t].thisPstY<o[t].thisHeight?i.$popCtn.css("top","0px"):s<i.$popCtn.height().toFixed(0)&&i.$popCtn.css({top:o[t].thisPstY-(i.$popCtn.height().toFixed(0)-s)+"px"})}},navItemMove:function(t){function e(){clearTimeout(n.moveTimer),n.isBind&&n.unbindNavItemEnter(),n.moveTimer=setTimeout(function(){n.reBindNavItemEnter()},100)}function i(){clearTimeout(n.moveTimer),n.isBind||n.reBindNavItemEnter()}var n=t.data.thisObj,o=$(this),s=n.config,a=t,h=s.moveDeg*(2*Math.PI/360),c=Math.tan(h).toFixed(2),p=0,r=0,m=0,l=null,v=null;if(n.potCollect.push({x:a.pageX,y:a.pageY}),n.potCollect.length>4)switch(n.potCollect.shift(),l=n.potCollect[0],v=n.potCollect[n.potCollect.length-1],r=v.x-l.x,m=v.y-l.y,p=Math.abs((m/r).toFixed(2)),s.menuDirection){case"right":p<=c&&r>0?e():i();break;case"left":p<=c&&r<0?e():i()}return clearTimeout(n.enterTimer),n.enterTimer=setTimeout(function(){o.trigger("mouseenter",{thisObj:n,callback:s.itemEnterCallBack})},300),!1},navItemLeave:function(t){var e=t.data.thisObj;$(this),e.config;clearTimeout(e.enterTimer)}});return t});